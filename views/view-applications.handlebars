<!DOCTYPE html>
<html lang="en" dir="ltr">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script type="text/javascript" src="/js/jquery-1.11.0.js"></script>
		<script type="text/javascript" src="/js/bootstrap.js"></script>
		<script type="text/javascript" src="/js/index.js"></script>
		<link rel="stylesheet" href="/css/bootstrap.css">
		<link rel="stylesheet" href="/css/bootstrap-theme.css">
		<link rel="stylesheet" href="/css/master.css">
		<link rel="stylesheet" href="/css/style.css">
		<link rel="stylesheet" href="/css/view-applications.css">
		<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">



		<title>View Applications Page</title>
	</head>
	<body>
		<div class="top-bar-desktop">
			<h1><p>Desktop</p></h1>
		</div>
		<div class="top-bar-mobile">
			<img id="logout" src="/images/logout.png" alt="search">
			<img id="menu" src="/images/menu.png" alt="menu">
		</div>
		<div class="subject-header">
				<h2>APPLICATIONS</h2>
		</div>

		<div class="subject-header-yellow">
			<div class="center">
				<button id="sortBtn">SORT &#9660;</button>
				<span>|</span>
				<button id="filterBtn">FILTER</button>
			</div>
		</div>


		<div class="center">
			<ul>
				{{#each currentApplications}}
				<li><div id="{{id}}" onclick="seeCompany(this.id)" class="text-wrapper">{{name}} - {{position}}</div>
					{{#if favorited}}
					<span><img src="/images/star.png" alt="fav" id="pic+{{id}}" onclick="toggle(this.id)"></span>
					{{else}}
					<span><img src="/images/unfilledstar.png" alt="not fav" id="pic+{{id}}" onclick="toggle(this.id)"></span>
					{{/if}}
				</li>
				{{/each}}
			</ul>
			<br class="jumboBr">
			<button id="addCoBtn">ADD COMPANY</button>
		</div>
	</body>

<script>

		document.getElementById('menu').onclick = function() {
			window.location.href = '/home';
		}
		document.getElementById('addCoBtn').onclick = function() {
			window.location.href = '/add-application';
		}
		document.getElementById('logout').onclick = function() {
			window.location.href = '/';
		}

		// $(".text-wrapper").click(function() {
		// 	window.location.href="/application";
		// });

		function toggle(picID) {
			var pic = document.getElementById(picID).src;

			if (pic.includes("unfilled")) {
  				document.getElementById(picID).src = "/images/star.png";
  		}
  		else {
  			document.getElementById(picID).src = "/images/unfilledstar.png";
  		}

			var coID = picID.substr('pic'.length);
			var res = $.get('http://localhost:3000/jobs/' + coID, (result) => {
				console.log(result);
			});

		}

		function seeCompany(coID) {
			localStorage.setItem('myStorage', coID);
			window.location.href = '/application';
		}

  </script>
</html>
